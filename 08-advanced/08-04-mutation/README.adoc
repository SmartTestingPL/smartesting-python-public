= Testy mutacyjne [08-04]

== Kod

Najpierw `_01_age.AgeVerification` jako implementacja, ktÃ³rÄ… bÄ™dziemy testowaÄ‡.

Potem klasa testowa `_02_age_verification_tests.Test02AgeVerification`, a w niej:

- `test_should_throw_exception_when_age_invalid`
- `test_should_return_positive_verification_when_age_is_within_the_threshold`
- `test_should_return_negative_verification_when_age_is_below_the_threshold`
- `test_should_return_negative_verification_when_age_is_above_the_threshold`

Czyli weryfikujemy

* wiek z przyszÅ‚oÅ›ci
* wiek w ramach przedziaÅ‚u akceptowalnego
* wiek poniÅ¼ej przedziaÅ‚u
* wiek powyÅ¼ej przedziaÅ‚u

Jak uruchomimy narzÄ™dzie do policzenia pokrycia kodu testami

```
cd 08-advanced/08-04-mutation
pytest --cov=smarttesting tests/
```

to wyjdzie nam 100% pokrycia kodu w klasach weryfikujÄ…cych. Pytanie jest czy wszystkie Å›cieÅ¼ki zostaÅ‚y rzeczywiÅ›cie pokryte? ZapomnieliÅ›my o warunkach brzegowych!

JeÅ›li uruchomimy:

```
cd 08-advanced/08-04-mutation/
mutmut run --paths-to-mutate smarttesting/verifier/customer/verification/_01_age.py
```

Zobaczymy, Å¼e z wygenerowanych 14 mutacji aÅ¼ 9 nie zostaÅ‚o wykrytych naszymi testami!

```
- Mutation testing starting -

...

Legend for output:
ğŸ‰ Killed mutants.   The goal is for everything to end up in this bucket.
â° Timeout.          Test suite took 10 times as long as the baseline so were killed.
ğŸ¤” Suspicious.       Tests took a long time, but not long enough to be fatal.
ğŸ™ Survived.         This means your tests needs to be expanded.
ğŸ”‡ Skipped.          Skipped.

mutmut cache is out of date, clearing it...
1. Running tests without mutations
â ¦ Running...Done

2. Checking mutants
â ´ 14/14  ğŸ‰ 5  â° 0  ğŸ¤” 0  ğŸ™ 9  ğŸ”‡ 0
```

Dodatkowe informacje moÅ¼emy uzyskaÄ‡ proszÄ…c o raport:
```
mutmut results
```

```
To apply a mutant on disk:
    mutmut apply <id>

To show a mutant:
    mutmut show <id>


Survived ğŸ™ (9)

---- smarttesting/verifier/customer/verification/_01_age.py (9) ----

5-11, 13-14
```
